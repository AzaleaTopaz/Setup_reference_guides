# Django Setup

#### Step 1
make a app_project directory in repository.

#### Step 2
open folder

#### Step 3
install pipenv if it is not already with brew install pipenv.

#### Step 4
activate virtual environment with pipenv shell.

#### step 5 
Open up Pipfile in the VsCode project and insert :

[packages]
django = " * "
psycopg2-binary = " * "

#### step 6 
install Django inside of /app_project folder(root directory) with: 

pipenv install django

#### step 7
install the library for connection Django to PostgreSQL:

pipenv install psycopg2-binary

#### step 8
start project:

pipenv run django-admin startproject app_django .

#### step 9
create app in virtual environment:

 django-admin startapp tunr

 #### step 10
 include app that was generated by finding the INSTALLED_APPS constant dictionary within app_django/settings.py:

 INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'appname_goes_here'
]

#### Step 11
create database. Check to see if PostgreSQL is running with:

brew services list

#### step 12 
create a settings.sql file in root directory(app_project) with:

touch settings.sql

#### step 13 
insert the following in settings.sql file:

-- settings.sql
CREATE DATABASE tunr;
CREATE USER tunruser WITH PASSWORD 'tunr';
GRANT ALL PRIVILEGES ON DATABASE tunr TO tunruser;

#### step 14
run the following in root directory:

psql postgres - f settings.sql

#### step 15
in app_django/settings.py, find DATABASES and enter the following: 

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'tunr',
        'USER': 'tunruser',
        'PASSWORD': 'tunr',
        'HOST': 'localhost'
    }
}

#### step 16
run terminal with:

python3 manage.py runserver

#### step 17

create models similare to the following example:

app/models.py
class Artist(models.Model):

    name = models.CharField(max_length=100)
    nationality = models.CharField(max_length=100)
    photo_url = models.TextField()

     def __str__(self):
    return self.name


#### step 18

Migrate models first by entering:

 python3 manage.py makemigrations

 (if editing models make sure t orun makemigrations again)

once all changes are made proceed to run:

python3 manage.py migrate

(if running into fatal error, enter the data base with:

psql tunr

and enter :
GRANT postgres TO tunruser;
)

If you are recieving an error that says "Permisson denied on public schema", try running this command in PSQL:

ALTER DATABASE tunr OWNER TO tunruser;

#### step 19

Add foreignKeys with similar syntax  to the following block:

class Song(models.Model):
    artist = models.ForeignKey(Artist, on_delete=models.CASCADE, related_name='songs')

#### step 20

Make migrations again.

#### step 21
Django has authentication (and authorization) right out of the box, so you don't have to write it yourself or add a plugin.

In the terminal, run:

$ python3 manage.py createsuperuser


#### step 22:
Django has an admin dashboard built in, which gives us full CRUD functionality straight out of the box.

Let's set it up! In tunr/admin.py, add the following code:

from django.contrib import admin
from .models import Artist, Song
admin.site.register(Artist)
admin.site.register(Song)

#### Finally

Run server again with python3 manage.py runserver














